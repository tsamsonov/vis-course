<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Тимофей Самсонов">
<meta name="dcterms.date" content="2022-09-30">

<title>Визуализация пространственных данных</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="02_CG_Color_temp_files/libs/clipboard/clipboard.min.js"></script>
<script src="02_CG_Color_temp_files/libs/quarto-html/quarto.js"></script>
<script src="02_CG_Color_temp_files/libs/quarto-html/popper.min.js"></script>
<script src="02_CG_Color_temp_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="02_CG_Color_temp_files/libs/quarto-html/anchor.min.js"></script>
<link href="02_CG_Color_temp_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="02_CG_Color_temp_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="02_CG_Color_temp_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="02_CG_Color_temp_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="02_CG_Color_temp_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
</head><body class="fullcontent">\usepackage{amsmath}
\DeclareMathOperator{\sign}{sign}

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>





<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Визуализация пространственных данных</h1>
<p class="subtitle lead">Картографические базы данных</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Тимофей Самсонов </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 30, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="цвет" class="level2">
<h2 class="anchored" data-anchor-id="цвет">Цвет</h2>
<p>Одно из существующих определений цвета гласит:</p>
<blockquote class="blockquote">
<p>“Color is the aspect of visual perception by which an observer may distinguish differences between two structure-free fields of view of the same size and shape, such as may be caused by differences in the spectral composition of the radiant energy concerned in the observation”</p>
<p>– <cite>Wyszecki, G., &amp; Stiles, W. (2000). Color Science: Concepts and Methods, Quantitative Data and Formulae (Second ed.). New York: Wiley.</cite></p>
</blockquote>
<p><em>Трихроматическая генерализация:</em> любой цветовой стимул может быть однозначно сопоставлен некой аддитивной сумме трех смодулированных необходимым путём источников света.</p>
<hr>
</section>
<section id="законы-грассманна" class="level2">
<h2 class="anchored" data-anchor-id="законы-грассманна">Законы Грассманна</h2>
<p>Законы аддитивного смешения цветов впервые сформлировал немецкий ученый Герман Грассманн в 1853 г.:</p>
<ul>
<li><p><strong>Симметричность:</strong> стимул <span class="math inline">\(A\)</span> соответствует стимулу <span class="math inline">\(B\)</span>, то стимул <span class="math inline">\(B\)</span> соответствует стимулу <span class="math inline">\(A\)</span>.</p></li>
<li><p><strong>Транзитивность:</strong> если <span class="math inline">\(A\)</span> соответствует <span class="math inline">\(B\)</span> и <span class="math inline">\(B\)</span> соответствует <span class="math inline">\(C\)</span>, то <span class="math inline">\(A\)</span> соответствует <span class="math inline">\(C\)</span>.</p></li>
<li><p><strong>Пропорциональность:</strong> если <span class="math inline">\(A\)</span> соответствует <span class="math inline">\(B\)</span>, то <span class="math inline">\(\alpha A\)</span> соответствует <span class="math inline">\(\alpha B\)</span>, где <span class="math inline">\(\alpha\)</span> — положительный масштабный коэффициент.</p></li>
<li><p><strong>Аддитивность:</strong> если <span class="math inline">\(A\)</span> соответствует <span class="math inline">\(B\)</span>, <span class="math inline">\(C\)</span> соответствует <span class="math inline">\(D\)</span>, и при этом <span class="math inline">\(A + C\)</span> соответствует <span class="math inline">\(B + D\)</span>, то <span class="math inline">\(A + D\)</span> соответствует <span class="math inline">\(B + C\)</span>.</p></li>
</ul>
<hr>
</section>
<section id="функции-отклика" class="level2">
<h2 class="anchored" data-anchor-id="функции-отклика">Функции отклика</h2>
<p>Трихроматическое зрение человека обеспечивается колбочками тремя типов, отвечающими за восприятие коротковолновой <span class="math inline">\(S\)</span>, средневолновой <span class="math inline">\(M\)</span> и длинноволновой <span class="math inline">\(L\)</span> части спектра.</p>
<p>.pull-left[ <strong>Значение тристимула</strong> (отклик клетки) получается путем свёртки спектра излучения <span class="math inline">\(\Phi(\lambda)\)</span> функцией отклика:]</p>
<p>.pull-right[ <strong>Функции отклика:</strong>]</p>
<hr>
</section>
<section id="метамерия" class="level2">
<h2 class="anchored" data-anchor-id="метамерия">Метамерия</h2>
<p><strong>Метамерия</strong> — это явление, при котором разные по спектральному составу цветовые стимулы создают одинаковый отклик в клетках (одинаковое восприятие).</p>
<ul>
<li><p>Поскольку значения тристимула получаются путем интегрирования произведения двух функций, очевидно, что зрительная система человека не работает детектор волн определенной длины.</p></li>
<li><p>Фактически человеческие фоторецепторы работают как линейные интеграторы излучения.</p></li>
<li><p>Как следствие, интегрирование разных спектральных кривых может приводить к одинаковым значениям тристимулов.</p></li>
</ul>
<hr>
</section>
<section id="метамерия-1" class="level2">
<h2 class="anchored" data-anchor-id="метамерия-1">Метамерия</h2>
<p>.left-40[ Справа на рисунке показано две кривых спектральной яркости <span class="math inline">\(\Phi_1(\lambda)\)</span> и <span class="math inline">\(\Phi_2(\lambda)\)</span>, которые после интегрирования будут давать одинаковый отклик <span class="math inline">\((L, M,S)\)</span>.]</p>
<p>.right-60[ <img src="01_CG_Fundamentals_insertimage_70.png" class="img-fluid" alt="Plot title.">]</p>
<hr>
</section>
<section id="метамерия-2" class="level2">
<h2 class="anchored" data-anchor-id="метамерия-2">Метамерия</h2>
<p>Классический эксперимент, который использует явление метамерии.</p>
<ul>
<li><p>Пусть есть 3 источника света, каждый с регулятором интенсивности.</p></li>
<li><p>Есть четвертый источник света, который необходимо подобрать.</p></li>
</ul>
<p><strong>Закон аддитивности</strong> Грассманна говорит о том, что, регулируя интенсивность каждого источника, можно добиться такого эффекта, что спектр, образованный смешением этих цветов, в результате интегрирования будет давать значения тристимулов, которые идентичны отклику на четвертый, неизвестный по составу источник освещения.</p>
<blockquote class="blockquote">
<p>При этом полученный спектр практически достоверно будет отличаться от подбираемого.</p>
</blockquote>
<hr>
</section>
<section id="стандартный-наблюдатель" class="level2">
<h2 class="anchored" data-anchor-id="стандартный-наблюдатель">Стандартный наблюдатель</h2>
<p>.left-40[ <strong>CIE Standard Observer</strong>]</p>
<p>.right-60[ <img src="01_CG_Fundamentals_insertimage_71.png" class="img-fluid" alt="Plot title.">]</p>
<hr>
</section>
<section id="стандартный-наблюдатель-1" class="level2">
<h2 class="anchored" data-anchor-id="стандартный-наблюдатель-1">Стандартный наблюдатель</h2>
<p>Эксперимент по получению стандартных функций отклика строился следующим образом:</p>
<ol type="1">
<li><p>Респонденту демонстрировался круглый экран диаметром 2 градуса, разделенный пополам: в одной половине демонстрировался тестовый монохроматический свет. В другой половине респондент имел возможность регулировать яркость трех основных цветов, пока не будет достигнуто визуальное соответствие.</p></li>
<li><p>Выяснилось, что не все цвета могут быть сопоставлены таким образом. В этом случае респондент имел возможность добавить один из основных цветов к тестовому цвету, и далее уже добиться соответствия регулировкой оставшихся двух. Количество добавленноо цвета засчитывалось как <em>отрицательное</em> значение яркости.</p></li>
</ol>
<hr>
</section>
<section id="стандартный-наблюдатель-2" class="level2">
<h2 class="anchored" data-anchor-id="стандартный-наблюдатель-2">Стандартный наблюдатель</h2>
<p>Функции соответствия <span class="math inline">\(\overline r(\lambda)\)</span>, <span class="math inline">\(\overline g(\lambda)\)</span> и <span class="math inline">\(\overline b(\lambda)\)</span> позволяют установить факт совпадения цветов путем сравнения тристимулов, полученных в результате интегрирования с их применением:</p>
<p>$$R = _{} <em>1()<sub>r()</sub>d= </em>{} _2()<sub>r()</sub>d,\</p>
<p>G = _{} <em>1()<sub>g()</sub>d= </em>{} <em>2()<sub>g()</sub>d,\ B = </em>{} <em>1()<sub>b()</sub>d= </em>{} _2()<sub>b()</sub>d.$$</p>
<p>Благодаря использованию этих функций появляется возможность компактным образом описывать цвета.</p>
<hr>
</section>
<section id="история-xyz" class="level2">
<h2 class="anchored" data-anchor-id="история-xyz">История XYZ</h2>
<p>На момент появления в 1930-е гг система тристимулов RGB была не очень востребована по двум причинам:</p>
<ol type="1">
<li><p>Численное интегрирование вызывало затруднения, особенно для случая когда функция может принимать отрицательные значения.</p></li>
<li><p>CIE ранее разработала функцию относительно спектральной эффективности <span class="math inline">\(V(\lambda)\)</span>, которая показывала чувствительность среднего человеческого глаза к разным длинам волн. Была необходимость использования этой величины в качестве одного из тристимулов.</p></li>
</ol>
<hr>
</section>
<section id="история-xyz-1" class="level2">
<h2 class="anchored" data-anchor-id="история-xyz-1">История XYZ</h2>
<p>.pull-left[ Для того чтобы получить систему <em>положительных</em> функций соответствия, необходимо выбрать систему воображаемых основных цветов — <strong>CIE 1931 Standard Observer</strong>.]</p>
<p>.pull-right[ Такие функции соответствия получили названия <span class="math inline">\(\overline x(\lambda)\)</span>, <span class="math inline">\(\overline y(\lambda)\)</span> и <span class="math inline">\(\overline z(\lambda)\)</span>, где <span class="math inline">\(\overline y(\lambda) = V(\lambda)\)</span>:]</p>
<hr>
</section>
<section id="история-xyz-2" class="level2">
<h2 class="anchored" data-anchor-id="история-xyz-2">История XYZ</h2>
<p>Тристимулы, вычисляемые таким образом, получили названия <span class="math inline">\(X\)</span>, <span class="math inline">\(Y\)</span>, <span class="math inline">\(Z\)</span> во избежание путаницы с <span class="math inline">\(R\)</span>, <span class="math inline">\(G\)</span> и <span class="math inline">\(B\)</span>, которые ассоциированы с реально существующими базовыми цветами.</p>
<p>Конвертация между пространствами выполняется с помощью простого преобразования:</p>
<p><span class="math display">\[
\begin{bmatrix}
X \\
Y \\
Z
\end{bmatrix}
= \frac{1}{0.176\,97}
\begin{bmatrix}
0.490\,00 &amp; 0.310\,00 &amp; 0.200\,00 \\
0.176\,97 &amp; 0.812\,40 &amp; 0.010\,63 \\
0.000\,00 &amp; 0.010\,00 &amp; 0.990\,00
\end{bmatrix}
\begin{bmatrix}
R \\
G \\
B
\end{bmatrix}
\]</span></p>
<p>Поскольку пространство <span class="math inline">\(XYZ\)</span> является стандартным для перехода между другими пространствами, обычно для вычисления соответствующих тристимулов выполняется непосредственное интегрирования с помощью функций соответствия <span class="math inline">\(\overline x(\lambda)\)</span>, <span class="math inline">\(\overline y(\lambda)\)</span> и <span class="math inline">\(\overline z(\lambda)\)</span>, а не в <span class="math inline">\(RGB\)</span></p>
<hr>
</section>
<section id="хроматические-координаты" class="level2">
<h2 class="anchored" data-anchor-id="хроматические-координаты">Хроматические координаты</h2>
<p>Каждый цвет может быть представлен значениями тристимулов <span class="math inline">\((X, Y, Z)\)</span>, которые определяют трехмерное <em>цветовое пространство</em> и занимают некоторый объем в нем, называемый <em>цветовой гаммой</em>.</p>
<p>Поскольку визуализация цвета в 3D затруднительна для восприятия, обычно выполняют проецирование координат на двумерную плоскость. Проекция называется <em>хроматической диаграммой</em> и определяется следующими преобразованиями:</p>
<p><span class="math display">\[
x = \frac{X}{X + Y + Z},~y = \frac{Y}{X + Y + Z},~z = \frac{Z}{X + Y + Z}
\]</span></p>
<p>Поскольку <span class="math inline">\(x + y + z = 1\)</span>, значение <span class="math inline">\(z = 1 - x - y\)</span> явяляется избыточным и появляется возможность отобразить проецированные значения цвета в системе координат <span class="math inline">\(xy\)</span>.</p>
<hr>
</section>
<section id="хроматические-координаты-1" class="level2">
<h2 class="anchored" data-anchor-id="хроматические-координаты-1">Хроматические координаты</h2>
<p>.pull-left[ Традиционно значения самих тристимулов восстанавливаются по величине <span class="math inline">\(Y\)</span> в сочетании с хроматическими координатами:]</p>
<p>.pull-right[ Монохроматические цвета образуют копытообразную кривую, которая называется <strong>спектральным локусом</strong>:]</p>
<hr>
</section>
<section id="цветовой-охват" class="level2">
<h2 class="anchored" data-anchor-id="цветовой-охват">Цветовой охват</h2>
<p>.pull-left[ Каждому основному цвету соответствуют значения тристимулов, полученные интегрированием по всем видимому спектру, и соответственно координаты <span class="math inline">\((x, y)\)</span> на хроматической диаграмме.]</p>
<p>.pull-right[ <strong>Цветовой охват</strong> для CIE RGB (сплошная линия) и типичного устройства HDTV (пунктирная линия): <img src="01_CG_Fundamentals_insertimage_74.png" class="img-fluid">]</p>
<hr>
</section>
<section id="ограничения-хроматической-диаграммы" class="level2">
<h2 class="anchored" data-anchor-id="ограничения-хроматической-диаграммы">Ограничения хроматической диаграммы</h2>
<p>Хроматическая диаграмма обладает особенностями, которые необходимо принимать во внимание при ее использовании:</p>
<ul>
<li><p>Каждая система воспроизводства цвета обладает своими основным цветами, которые не являются идеально монохроматическими.</p></li>
<li><p>Функции соответствия CIE не эквивлентны функциям чувствительности колбочек, поэтому расстояние между цветами на хроматической диаграмме не является надежным показателем визуального отличия цветов.</p></li>
</ul>
<p>Для частичной компенсации проблемы второго типа CIE разработала хроматическую диаграмму CIE u’v’</p>
<hr>
</section>
<section id="хроматическая-диаграмма-cie-uv" class="level2">
<h2 class="anchored" data-anchor-id="хроматическая-диаграмма-cie-uv">Хроматическая диаграмма CIE u’v’</h2>
<p>.pull-left[ Хроматическая диаграмма CIE u’v’ обеспечивает более равномерное распределение цветов благодаря применению проекции следующего типа:]</p>
<p>.pull-right[ <img src="01_CG_Fundamentals_insertimage_75.png" class="img-fluid" alt="Plot title.">]</p>
<hr>
</section>
<section id="проблемы-xyz" class="level2">
<h2 class="anchored" data-anchor-id="проблемы-xyz">Проблемы XYZ</h2>
<ul>
<li><p>Основные цвета в системе XYZ — воображаемые. Невозможно построить устройство, которое будет иметь три источника освещения (положительного), которое сможет воспроизводить все цвета видимой части спектра.</p></li>
<li><p>Помимо этого, существует большое число возможных сочетаний XYZ, которые не соответствуют ни одному физическому цвету.</p></li>
<li><p>Теоретически не невозможно построить воспринимающее устройство, чьи основные цвета будут близки к функциям соответствия XYZ, однако такое решение не практично как по стоимости аппаратного обеспечения, так и по сложности программной обработки.</p></li>
</ul>
<p>В идеале цветовое пространство должно быть: физически реализуемым, эффективно кодируемым, перцептивно равномерным и интуитивно параметризуемым.</p>
<hr>
</section>
<section id="проблемы-xyz-1" class="level2">
<h2 class="anchored" data-anchor-id="проблемы-xyz-1">Проблемы XYZ</h2>
<ul>
<li><p>XYZ по-прежнему активно используется, главным образом как независимое от устройства цветовое пространство.</p></li>
<li><p>Остальные цветовые пространства определяются по их отношению к XYZ</p></li>
</ul>
<hr>
</section>
<section id="переход-rgb-xyz" class="level2">
<h2 class="anchored" data-anchor-id="переход-rgb-xyz">Переход RGB-XYZ</h2>
<p>Поскольку цветовое пространство RGB зависит от параметров источников красного, зеленого и синего цвета конкретного монитора, для точного перехода в XYZ необходимо производить калибровку — измерение параметров.</p>
<ol type="1">
<li>Поочередно измеряется спектр сигналов, которые соответствуют цветовым векторам <span class="math inline">\(R = (1, 0, 0)\)</span>, <span class="math inline">\(G = (0, 1, 0)\)</span> и <span class="math inline">\(B = (0, 0, 1)\)</span>.</li>
<li>На основе спектрометрирования получаются хроматические координаты <span class="math inline">\((x_R, y_R)\)</span>, <span class="math inline">\((x_G, y_G)\)</span>, <span class="math inline">\((x_B, y_B)\)</span>.</li>
<li>Аналогичное спектрометрирование посторяется для <em>точки белого</em> <span class="math inline">\(W = (1, 1, 1)\)</span>, чтобы получить ее хроматические координаты <span class="math inline">\((x_W, y_W)\)</span>.</li>
</ol>
<p>Полученные хроматические координаты характеризуют дисплей и позволяют сформировать матрицу трансформации между его цветовым пространством и CIE XYZ.</p>
<hr>
</section>
<section id="переход-rgb-xyz-1" class="level2">
<h2 class="anchored" data-anchor-id="переход-rgb-xyz-1">Переход RGB-XYZ</h2>
<p>Для построения матрицы трансфо рмации после получения хроматических координат выполняется следующее преобразование:</p>
<ol type="1">
<li><p>Используя зависимость <span class="math inline">\(z = 1 - x - y\)</span>, получают триплеты <span class="math inline">\((x_R, y_R, z_R)\)</span>, <span class="math inline">\((x_G, y_G, z_G)\)</span>, <span class="math inline">\((x_B, y_B, z_B)\)</span>, <span class="math inline">\((x_W, y_W, z_W)\)</span>.</p></li>
<li><p>Измеряется максимальная яркость монитора <span class="math inline">\(\max(Y) = Y_W\)</span>.</p></li>
<li><p>Используя соотношения <span class="math inline">\(X = Y\frac{x}{y},~Z = Y\frac{1-x-y}{y}\)</span>, получают соответствующие значения тристимулов <span class="math inline">\((X_W, Y_W, Z_W)\)</span>.</p></li>
<li><p>Составляется система линейных уравнений относительно <span class="math inline">\(S_R, S_G, S_B\)</span>:</p></li>
</ol>
<p><span class="math display">\[\begin{eqnarray}
X_W &amp;=&amp; x_R S_R + x_G S_G + x_B S_B, \\
Y_W &amp;=&amp; y_R S_R + y_G S_G + y_B S_B, \\
Z_W &amp;=&amp; z_R S_R + z_G S_G + z_B S_B,
\end{eqnarray}\]</span></p>
<hr>
</section>
<section id="переход-rgb-xyz-2" class="level2">
<h2 class="anchored" data-anchor-id="переход-rgb-xyz-2">Переход RGB-XYZ</h2>
<p>$$<span class="math display">\[\begin{eqnarray}


X_W &amp;=&amp; x_R S_R + x_G S_G + x_B S_B, \\
Y_W &amp;=&amp; y_R S_R + y_G S_G + y_B S_B, \\
Z_W &amp;=&amp; z_R S_R + z_G S_G + z_B S_B,
\end{eqnarray}\]</span>$$</p>
<p>Решив систему линейных уравнений, получаем матрицу преобразования:</p>
<p><span class="math display">\[
\begin{bmatrix}
X \\
Y \\
Z
\end{bmatrix}
=
\begin{bmatrix}
x_R S_R &amp; x_G S_G &amp; x_B S_B \\
y_R S_R &amp; y_G S_G &amp; y_B S_B \\
z_R S_R &amp; z_G S_G &amp; z_B S_B
\end{bmatrix}
\begin{bmatrix}
R \\
G \\
B
\end{bmatrix}
\]</span></p>
<p>Яркость каждого цвета монитора может быть определена как</p>
<p><span class="math display">\[Y = y_R S_R R + y_G S_G G + y_B S_B B\]</span></p>
<hr>
</section>
<section id="использование-srgb" class="level2">
<h2 class="anchored" data-anchor-id="использование-srgb">Использование sRGB</h2>
<p>Если вы используете изображение, для которого основные цвета не известны (не была выполнена калибровка), обычно предполагают, что оно создано на устройстве с цветовым пространством <em>sRGB</em>, которое соответствует вещанию в формате HDTV.</p>
<p>Стандарт <strong>ITU-R BT.709</strong> предписывает следующие величины хроматических координат:</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th>R</th>
<th>G</th>
<th>B</th>
<th>W</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>x</td>
<td>0.6400</td>
<td>0.3000</td>
<td>0.1500</td>
<td>0.3127</td>
</tr>
<tr class="even">
<td>y</td>
<td>0.3300</td>
<td>0.6000</td>
<td>0.0600</td>
<td>0.3290</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="нелинейные-преобразования-цвета" class="level2">
<h2 class="anchored" data-anchor-id="нелинейные-преобразования-цвета">Нелинейные преобразования цвета</h2>
<p>Перед/после трансформации в XYZ обычно также применяется нелинейная трансформация с целью минимизировать перцептивные ошибки восприятия, связанные с квантификацией цвета. Общий вид таких преобразований таков:</p>
<p><span class="math display">\[C_\mathrm{nonlinear}=\begin{cases}
sC, &amp; C \le t\\
(1+f)C^{\gamma}-f, &amp; C &gt; t
\end{cases}\]</span></p>
<p>Где <span class="math inline">\(C = R, G, B\)</span>. Параметры <span class="math inline">\(s, f, t, \gamma\)</span>, а также непосредственные спектры основных цветов и точки белого определяют цветовое пространство.</p>
<p>В частности, для sRGB:</p>
$$C_=
<span class="math display">\[\begin{cases}


12.92C, &amp; C \le 0.0031308\\
1.055C^{1/2.4}-0.055, &amp; C &gt; 0.0031308
\end{cases}\]</span>
<p>$$</p>
<hr>
</section>
<section id="распространенные-преобразования" class="level2">
<h2 class="anchored" data-anchor-id="распространенные-преобразования">Распространенные преобразования</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_76.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 80%</figcaption><p></p>
</figure>
</div>
<p>.small[<em>Pascale, 2003</em>]</p>
<hr>
</section>
<section id="хроматическая-адаптация" class="level2">
<h2 class="anchored" data-anchor-id="хроматическая-адаптация">Хроматическая адаптация</h2>
<p>Среда, в которой происходит наблюдение объектов, оказывает огромное влияние на восприятие цвета.</p>
<p>Разнообразие источников освещения велико: дневной свет, лунный свет, свет флюоресцентной лампы, свет открытого огня (свечи).</p>
<p>Различия проявляются по двум параметрам:</p>
<ul>
<li>Интенсивность испускаемого света.</li>
<li>Спектральный состав света.</li>
</ul>
<blockquote class="blockquote">
<p>Зрительная система человека учитывает эти изменения посредством процесса, который носит название <strong>адаптации</strong>.</p>
</blockquote>
<hr>
</section>
<section id="хроматическая-адаптация-1" class="level2">
<h2 class="anchored" data-anchor-id="хроматическая-адаптация-1">Хроматическая адаптация</h2>
<p>Выделяют три типа адаптации:</p>
<ul>
<li>Световая адаптация (переход из темной среды в светлую). Занимает несколько минут.</li>
<li>Темновая адаптация (переход из светлой среды в темную). Занимает несколько часов.</li>
<li>Хроматическая адаптация (переход из одного источника освещения под другой).</li>
</ul>
<p>Хроматическая адаптация аналогична установке точки белого в графических пакетах.</p>
<p>Наличие способности к хроматической адаптации является причиной <em>цветопостоянства</em> — восприятие отраженного от объекта цвета не зависит от условий освещения.</p>
<hr>
</section>
<section id="хроматическая-адаптация-2" class="level2">
<h2 class="anchored" data-anchor-id="хроматическая-адаптация-2">Хроматическая адаптация</h2>
<p>Зеленые фрагменты имеют одинаковый цвет, но находятся в разных условиях освещения.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_81.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 80%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="хроматическая-адаптация-3" class="level2">
<h2 class="anchored" data-anchor-id="хроматическая-адаптация-3">Хроматическая адаптация</h2>
<p>.pull-left[ <img src="01_CG_Fundamentals_insertimage_82.png" class="img-fluid">]</p>
<p>.pull-right[ Белый лист бумаги, освещенный такими источниками освещения, будет восприниматься именно как белый.]</p>
<hr>
</section>
<section id="хроматическая-адаптация-4" class="level2">
<h2 class="anchored" data-anchor-id="хроматическая-адаптация-4">Хроматическая адаптация</h2>
<p>Вычислительные модели хроматической адаптации фокусируются на механизме возбуждения колбочек.</p>
<p>Простейшая модель <em>фон Криса</em> предполагает, что каждый тип клетки адаптируется к спектру освещения независимо. В этом случае каждая из тристимулов масштабируется на свой коэффициент:</p>
<p><span class="math display">\[
L_a = \alpha L,\\
M_a = \beta M,\\
S_a = \gamma S,
\]</span></p>
<p>где <span class="math inline">\((L_a, M_a, S_a)\)</span> — хроматически адаптированные сигналы колбочек, <span class="math inline">\(\alpha\)</span>, <span class="math inline">\(\beta\)</span>, <span class="math inline">\(\gamma\)</span> — независимые котнтроллеры отклика.</p>
<hr>
</section>
<section id="хроматическая-адаптация-5" class="level2">
<h2 class="anchored" data-anchor-id="хроматическая-адаптация-5">Хроматическая адаптация</h2>
<p>Модель фон Риса приводит к подобному масштабированию функций отклика клеток:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_83.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 80%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="хроматическая-адаптация-6" class="level2">
<h2 class="anchored" data-anchor-id="хроматическая-адаптация-6">Хроматическая адаптация</h2>
<p>При вычислении модели адаптации важно понимать, какими характеристиками обладает источник освещения.</p>
<p>При цифровой обработке изображений за характеристику источника освещения часто принимают сигнал, который формирует максимальное значение тристимула <span class="math inline">\((L_w, M_w, S_w)\)</span>. В этом случае адаптация фон Криса реализуется путем масштабирования на обратную матрицу измеренных компонент:</p>
<p><img src="01_CG_Fundamentals_insertimage_84.png" class="img-fluid"></p>
<hr>
</section>
<section id="хроматическая-адаптация-7" class="level2">
<h2 class="anchored" data-anchor-id="хроматическая-адаптация-7">Хроматическая адаптация</h2>
<p>Часто возникает такая задача: какой стимул должен быть сгенерирован при одном освещении, чтобы его цветовое восприятие соответствовало восприятию другого стимула, наблюдаемого при другом освещении?</p>
<p>Задача решается путем касакадирования аналогичных преобразований при условии, что измерены два источника освещения <span class="math inline">\((L_{w_1}, M_{w_1}, S_{w_1})\)</span> и <span class="math inline">\((L_{w_2}, M_{w_2}, S_{w_2})\)</span>:</p>
<p><img src="01_CG_Fundamentals_insertimage_85.png" class="img-fluid"></p>
<hr>
</section>
<section id="хроматическая-адаптация-8" class="level2">
<h2 class="anchored" data-anchor-id="хроматическая-адаптация-8">Хроматическая адаптация</h2>
<p>При использовании хроматической адаптации нет необходимости перерасчета визуализируемой сцены. Коррекция на условия освещения делается после выполнения рендеринга.</p>
<p>Во избежание артефактов вычисления должны производиться с плавающей точкой. И только перед отображением конвертироваться в 8-битное изображение.</p>
<hr>
</section>
<section id="цвето-оппонирующие-пространства" class="level2">
<h2 class="anchored" data-anchor-id="цвето-оппонирующие-пространства">Цвето-оппонирующие пространства</h2>
<p>В цвето-оппонирующих пространствах используется один ахроматический канал (яркость) и два канала, предсттавляющих оппонирующие (несовместимые) цвета в отрицательном и положительном направлении.</p>
<ul>
<li>Распространенные оппонирующие каналы: красный—зеленый и желтый—синий.</li>
<li>Наиболее известна цвето-оппонирующая система — это CIE 1976 <span class="math inline">\(L^*a^*b^*\)</span>, известная как просто CIELAB.</li>
<li>СIELAB характеризуется более-менее равномерным изменением цвета с точки зрения восприятия, и может быть использовано для вычисления разности цветов.</li>
<li>CIELAB является <em>рудиментарным</em> цветовым пространством, поскольку учитывает не только значения тристимулов <span class="math inline">\(X, Y, Z\)</span>, но также значения тристимулов <span class="math inline">\(X_n, Y_n, Z_n\)</span>, которые соответствуют диффузному отражению света известного источника освещения от белой поверхности.</li>
<li>CIELAB использует модель хроматической адаптации фон Криса</li>
</ul>
<hr>
</section>
<section id="cie-lab" class="level2">
<h2 class="anchored" data-anchor-id="cie-lab">CIE LAB</h2>
<p>Канал <span class="math inline">\(L^* \in [0, 100]\)</span> обозначает <em>светлоту</em> цвета, т.е. воспринимаемое отражение цвета с тристимулом <span class="math inline">\(X, Y, Z\)</span>. Компоненты <span class="math inline">\(a^*, b^* \in [-128, 128]\)</span> являются оппонирующими хроматическими.</p>
<p>Преобразование задается как:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_77.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 60%</figcaption><p></p>
</figure>
</div>
<p>Где функция <span class="math inline">\(f\)</span> определена как:</p>
<p><span class="math display">\[f(t) = \begin{cases}
  \sqrt[3]t &amp; \text{если } t &gt; 0.008856 \\
  7.787 r + \frac{16}{116} &amp; \text{в противном случае}
\end{cases}\]</span></p>
<hr>
</section>
<section id="разность-цветов-в-cie-lab" class="level2">
<h2 class="anchored" data-anchor-id="разность-цветов-в-cie-lab">Разность цветов в CIE LAB</h2>
<p>Поскольку данное пространство перцептивно примерно линейно, можно оценить разность цветов, сконвертировав их в CIELAB, а затем вычислив Евклидово расстояние между ними.</p>
<p>Используется следующая широко применяемая формула:</p>
<p><span class="math display">\[\Delta E^*_{ab} = \sqrt{(\Delta L^*)^2 + (\Delta a^*)^2 + (\Delta b^*)^2}\]</span></p>
<hr>
</section>
<section id="обратное-преобразование" class="level2">
<h2 class="anchored" data-anchor-id="обратное-преобразование">Обратное преобразование</h2>
<p>Для перехода из CIELAB в XYZ используется обратное преобразование следующего вида:</p>
<p>$$<span class="math display">\[\begin{align}


X &amp;= X_{\mathrm{n}} f^{-1}\left(\frac{L^\star+16}{116} + \frac{a^\star}{500}\right)\\
  Y &amp;= Y_{\mathrm{n}} f^{-1}\left(\frac{L^\star+16}{116}\right),\\
  Z &amp;= Z_{\mathrm{n}} f^{-1}\left(\frac{L^\star+16}{116} - \frac{b^\star}{200}\right),\\
\end{align}\]</span>$$</p>
<p>где <span class="math inline">\(\delta = 6/29\)</span> и</p>
<p><span class="math display">\[f^{-1}(t) = \begin{cases}
  t^3 &amp; \text{если } t &gt; \delta \\
  3\delta^2\left(t - \frac{4}{29}\right) &amp; \text{в противном случае}
\end{cases}\]</span></p>
<hr>
</section>
<section id="cie-luv" class="level2">
<h2 class="anchored" data-anchor-id="cie-luv">CIE LUV</h2>
<p>Модель CIELUV была принята одновременно с CIELAB, но отличается от нее методом хроматической адаптации, позаимствованным из [Judd, 1940]. Модель Джуда считается более точной (но и более сложной). Трансформация <span class="math inline">\(\texttt{XYZ} \to \texttt{CIELUV}\)</span> выполняется следующим путем:</p>
<p>$$</p>
<p><span class="math display">\[\begin{align}
L^* &amp;= \begin{cases}
  \left(\frac{29}{3}\right)^3 Y / Y_n,&amp;   Y / Y_n \le \left(\frac{6}{29}\right)^3 \\
  116 \left( Y / Y_n \right)^{1/3} - 16,&amp;  Y / Y_n  &gt;   \left(\frac{6}{29}\right)^3      
\end{cases}\\
u^* &amp;= 13 L^*\cdot (u^\prime - u_n^\prime) \\
v^* &amp;= 13 L^*\cdot (v^\prime - v_n^\prime) \\
u^\prime &amp;= \frac{4 X}{X + 15 Y + 3 Z} = \frac{4 x}{-2 x + 12 y + 3} \\
v^\prime &amp;= \frac{9 Y}{X + 15 Y + 3 Z} = \frac{9 y}{-2 x + 12 y + 3},
\end{align}\]</span></p>
<p>$$ где <span class="math inline">\(u^{\prime}_n = 0.2009\)</span>, <span class="math inline">\(v^{\prime}_n = 0.4610\)</span> для стандартного источника освещения типа <span class="math inline">\(C\)</span> с температурой <span class="math inline">\(6774 K\)</span></p>
<hr>
</section>
<section id="цветовые-шкалы" class="level2">
<h2 class="anchored" data-anchor-id="цветовые-шкалы">Цветовые шкалы</h2>
<p><strong>Последовательные</strong> — используются для отображения <em>униполярных</em> количественных показателей.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02_CG_Color_temp_insertimage_1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 80%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="цветовые-щшкалы" class="level2">
<h2 class="anchored" data-anchor-id="цветовые-щшкалы">Цветовые щшкалы</h2>
<p><strong>Расходящиеся</strong> — используются для отображения <em>биполярных</em> количественных показателей.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02_CG_Color_temp_insertimage_2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 80%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="цветовые-щшкалы-1" class="level2">
<h2 class="anchored" data-anchor-id="цветовые-щшкалы-1">Цветовые щшкалы</h2>
<p><strong>Качественные</strong> — используются для отображения <em>номинальных</em> показателей.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02_CG_Color_temp_insertimage_3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 80%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="проблемы-пространства-hsv" class="level2">
<h2 class="anchored" data-anchor-id="проблемы-пространства-hsv">Проблемы пространства HSV</h2>
<p>.pull-left[ <img src="https://upload.wikimedia.org/wikipedia/commons/0/00/HSV_color_solid_cone_chroma_gray.png" class="img-fluid" alt=":scale 80%">]</p>
<p>.pull-right[ <img src="01_CG_Fundamentals_insertimage_37.png" class="img-fluid" alt=":scale 70%">]</p>
<hr>
</section>
<section id="проблемы-пространства-hsv-1" class="level2">
<h2 class="anchored" data-anchor-id="проблемы-пространства-hsv-1">Проблемы пространства HSV</h2>
<p>Изменение насыщенности при постоянной светлоте и тоне</p>
<p>S = 0, 25, 50:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_38.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 50%</figcaption><p></p>
</figure>
</div>
<p>S = 0, 50, 100:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_39.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 50%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="пространства-rgb-и-cmy" class="level2">
<h2 class="anchored" data-anchor-id="пространства-rgb-и-cmy">Пространства RGB и CMY</h2>
<p>.left-40[ <img src="01_CG_Fundamentals_insertimage_40.png" class="img-fluid" alt=":scale 60%"> <img src="01_CG_Fundamentals_insertimage_41.png" class="img-fluid" alt=":scale 60%">]</p>
<p>.right-60[ В большинстве случаев специалистам приходится работать с аддитивными и субтрактивными цветами в рамках пространств RBG и CMY.]</p>
<hr>
</section>
<section id="смешивание-цветов" class="level2">
<h2 class="anchored" data-anchor-id="смешивание-цветов">Смешивание цветов</h2>
<p>Если развернуть цветовой куб точкой белого или черного цвета к наблюдателю, то цвета будут упорядочены в соответствии с кругом цветового тона (Brewer, 2015):</p>
<p>.pull-left[ <img src="01_CG_Fundamentals_insertimage_43.png" class="img-fluid" alt=":scale 90%">]</p>
<p>.pull-right[ <img src="01_CG_Fundamentals_insertimage_44.png" class="img-fluid" alt=":scale 90%">]</p>
<hr>
</section>
<section id="смешивание-цветов-1" class="level2">
<h2 class="anchored" data-anchor-id="смешивание-цветов-1">Смешивание цветов</h2>
<p>В пространстве CMY (0-100):</p>
<p>.pull-left[ <img src="01_CG_Fundamentals_insertimage_45.png" class="img-fluid">]</p>
<p>.pull-right[ <img src="01_CG_Fundamentals_insertimage_46.png" class="img-fluid">]</p>
<hr>
</section>
<section id="смешивание-цветов-2" class="level2">
<h2 class="anchored" data-anchor-id="смешивание-цветов-2">Смешивание цветов</h2>
<p>.pull-left[ <img src="01_CG_Fundamentals_insertimage_47.png" class="img-fluid">]</p>
<p>.pull-right[ <img src="01_CG_Fundamentals_insertimage_48.png" class="img-fluid">]</p>
<hr>
</section>
<section id="смешивание-в-rgb" class="level2">
<h2 class="anchored" data-anchor-id="смешивание-в-rgb">Смешивание в RGB</h2>
<ul>
<li><p>Установить цветовой тон, используя 1 или 2 базовых цвета. Одинаковые пропорции дают одинаковый тон.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_51.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 60%</figcaption><p></p>
</figure>
</div></li>
<li><p>Изменить светлоту, сохранив пропорции компонент, но сдвинув их в сторону больших или меньших значений.</p>
<h2 id="scale-60" class="anchored"><img src="01_CG_Fundamentals_insertimage_52.png" class="img-fluid" alt=":scale 60%"></h2></li>
</ul>
</section>
<section id="смешивание-в-rgb-1" class="level2">
<h2 class="anchored" data-anchor-id="смешивание-в-rgb-1">Смешивание в RGB</h2>
<ul>
<li><p>Изменить насыщенность, уменьшив размах между минимальным и максимальным значением.</p>
<p><img src="01_CG_Fundamentals_insertimage_52.png" class="img-fluid" alt=":scale 60%"> <img src="01_CG_Fundamentals_insertimage_53.png" class="img-fluid" alt=":scale 60%"></p></li>
<li><p>Выполнить линейную интерполяцию цветов</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_54.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 60%</figcaption><p></p>
</figure>
</div></li>
</ul>
<hr>
</section>
<section id="цветовое-пространство-hcl" class="level2">
<h2 class="anchored" data-anchor-id="цветовое-пространство-hcl">Цветовое пространство HCL</h2>
<p>Цветовое пространство HCL (Hue — Chroma — Luminance) является полярным преобразованием однородного цветового пространства CIELUV и образует искаженный двойной конус, где каждое из трех измерений непосредственно контролирует одно из трех основных перцептивных измерений.</p>
<p><span class="math display">\[H = \texttt{atan2}(u, v), C = \sqrt{u^2 + v^2}, L = L\]</span></p>
<p>Связь с пространством RGB осуществляется через последовательность:</p>
<p><span class="math display">\[\texttt{RGB} \to \texttt{XYZ} \to \texttt{CIELUV} \to \texttt{HCL}\]</span></p>
<p><em>Achim Zeileis, Kurt Hornik, Paul Murrell</em> (2009). “Escaping RGBland: Selecting Colors for Statistical Graphics.” <strong>Computational Statistics &amp; Data Analysis</strong>, 53(9), 3259-3270.</p>
<hr>
</section>
<section id="цветовое-пространство-hcl-1" class="level2">
<h2 class="anchored" data-anchor-id="цветовое-пространство-hcl-1">Цветовое пространство HCL</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_61.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 70%</figcaption><p></p>
</figure>
</div>
<p><em>Reto Stauffer, Georg J. Mayr, Markus Dabernig, Achim Zeileis</em> (2015). “Somewhere over the Rainbow: How to Make Effective Use of Colors in Meteorological Visualizations.” <strong>Bulletin of the American Meteorological Society</strong>, 96(2), 203-216.</p>
<hr>
</section>
<section id="цветовое-пространство-hcl-2" class="level2">
<h2 class="anchored" data-anchor-id="цветовое-пространство-hcl-2">Цветовое пространство HCL</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_62.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 70%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="цветовое-пространство-hcl-3" class="level2">
<h2 class="anchored" data-anchor-id="цветовое-пространство-hcl-3">Цветовое пространство HCL</h2>
<p>Категориальные шкалы</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_56.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 50%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="цветовое-пространство-hcl-4" class="level2">
<h2 class="anchored" data-anchor-id="цветовое-пространство-hcl-4">Цветовое пространство HCL</h2>
<p>Последовательные шкалы</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_57.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 60%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="цветовое-пространство-hcl-5" class="level2">
<h2 class="anchored" data-anchor-id="цветовое-пространство-hcl-5">Цветовое пространство HCL</h2>
<p>Расходящиеся шкалы</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_58.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 40%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="цветовое-пространство-hcl-6" class="level2">
<h2 class="anchored" data-anchor-id="цветовое-пространство-hcl-6">Цветовое пространство HCL</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_59.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 90%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="цветовое-пространство-hcl-7" class="level2">
<h2 class="anchored" data-anchor-id="цветовое-пространство-hcl-7">Цветовое пространство HCL</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_60.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 70%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="цветовое-пространство-hcl-8" class="level2">
<h2 class="anchored" data-anchor-id="цветовое-пространство-hcl-8">Цветовое пространство HCL</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_63.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 90%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="цветовое-пространство-hcl-9" class="level2">
<h2 class="anchored" data-anchor-id="цветовое-пространство-hcl-9">Цветовое пространство HCL</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_64.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 80%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="пространство-манселла" class="level2">
<h2 class="anchored" data-anchor-id="пространство-манселла">Пространство Манселла</h2>
<p>.pull-left[ Цветовое пространство <strong>Манселла</strong> ограничено объемом асимметричной формы.] .pull-right[ <img src="01_CG_Fundamentals_insertimage_33.png" class="img-fluid" alt="Plot title.">]</p>
<p>.blue[Различные области цветового пространства имеют разный максимум хромы.]</p>
<hr>
</section>
<section id="пространство-манселла-1" class="level2">
<h2 class="anchored" data-anchor-id="пространство-манселла-1">Пространство Манселла</h2>
<p>.left-60[]</p>
<p>.right-40[ <img src="01_CG_Fundamentals_insertimage_34.png" class="img-fluid" alt="Plot title."> На практике шкалы часто составляются для 40 ступеней с шагом 2.5]</p>
<hr>
</section>
<section id="шкалы-в-пространстве-манселла" class="level2">
<h2 class="anchored" data-anchor-id="шкалы-в-пространстве-манселла">Шкалы в пространстве Манселла</h2>
<p>Пространство Манселла удобно тем, что в ней можно легко получить готовую цветовую шкалу, проведя систематический путь из одной точки в другую (Brewer, 2015):</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_CG_Fundamentals_insertimage_35.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 80%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="оценка-качества-картограмм" class="level2">
<h2 class="anchored" data-anchor-id="оценка-качества-картограмм">Оценка качества картограмм</h2>
<p><strong>Цвет</strong>: систематичность изменения расстояний между соседними цветами. Оценка через колористическое расстояние:</p>
<p><span class="math display">\[\Delta E^*_{ab} = \sqrt{(\Delta L^*)^2 + (\Delta a^*)^2 + (\Delta b^*)^2}\]</span></p>
<p><strong>Классификация</strong>: добротность аппроксимации (goodness of fit):</p>
<p><span class="math display">\[GADF = 1 - \frac{ADCM}{ADAM},\]</span></p>
<p>где <span class="math inline">\(ADCM\)</span> - сумма модулей отклонения значений от медиан в их классах, <span class="math inline">\(ADAM\)</span> - сумма модулей отклонения значений от медианы полной выборки</p>
<p><strong>Сложность</strong>: визуальная загруженность, мозаичность изображения</p>
<p><span class="math display">\[C = \frac{N_{c}}{N},\]</span></p>
<p>где <span class="math inline">\(N\)</span> — общее число полигонов/границ/вершин в полном наборе единиц, <span class="math inline">\(N_c\)</span> — число тех же элементов после объединения единиц, попадающих в один класс.</p>
<hr>
</section>
<section id="добротность-аппроксимации" class="level2">
<h2 class="anchored" data-anchor-id="добротность-аппроксимации">Добротность аппроксимации</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02_CG_Color_temp_insertimage_4.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 70%</figcaption><p></p>
</figure>
</div>
<hr>
</section>
<section id="сложность-изображения" class="level2">
<h2 class="anchored" data-anchor-id="сложность-изображения">Сложность изображения</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="compl.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">:scale 70%</figcaption><p></p>
</figure>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>